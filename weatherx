-- [[ STANDALONE AUTO BUY WEATHER - SILENT BACKGROUND VERSION ]] --

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RPath = {"Packages", "_Index", "sleitnick_net@0.2.0", "net"}

-- Configuration
local TargetWeathers = {"Cloudy", "Wind", "Storm"}
local SafeCheckInterval = 30 
local FailureDelay = 60      

-- Remote Helper
local function GetRemote(remotePath, name, timeout)
    local currentInstance = ReplicatedStorage
    for _, childName in ipairs(remotePath) do
        currentInstance = currentInstance:WaitForChild(childName, timeout or 0.5)
        if not currentInstance then return nil end
    end
    return currentInstance:FindFirstChild(name)
end

local RF_PurchaseWeatherEvent = GetRemote(RPath, "RF/PurchaseWeatherEvent", 5)

-- Logic Loop (Silent Mode)
task.spawn(function()
    while true do
        if not RF_PurchaseWeatherEvent then
            RF_PurchaseWeatherEvent = GetRemote(RPath, "RF/PurchaseWeatherEvent", 1)
            task.wait(5)
            continue
        end

        local boughtSomething = false

        for _, weather in ipairs(TargetWeathers) do
            -- Eksekusi pembelian tanpa output/print
            local success = pcall(function()
                return RF_PurchaseWeatherEvent:InvokeServer(weather)
            end)

            if success then
                boughtSomething = true
                break 
            end
            
            task.wait(1) 
        end

        if boughtSomething then
            task.wait(SafeCheckInterval) 
        else
            task.wait(FailureDelay)
        end
    end
end)
